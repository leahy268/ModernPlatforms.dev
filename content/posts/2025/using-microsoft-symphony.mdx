---
title: Testing IAC (Bicep) with Microsoft Symphony
category: Cloud Automation
heroImg: /uploads/TestingBicep2.png
excerpt: >
  Testing IAC is always a problem. Waiting for a full deployment to occur before
  discovering bugs is a time-consuming process. Using Microsoft Symphony, we can
  validate Bicep code early and avoid unnecessary delays.
author: content/authors/warwick.md
date: 2025-05-15T10:00:00.000Z
---

## Why Test Bicep with Microsoft Symphony?

Infrastructure as Code (IAC) brings automation and consistency to cloud deployments, but testing can be a challenge. Bicep, Microsoft's DSL for Azure Resource Manager, helps simplify infrastructure definitions. However, without proper validation, teams often run into deployment issues that could have been caught earlier. This is where Microsoft Symphony can help.

Symphony allows you to orchestrate and execute workflows that automate validation, testing, and deployment of Bicep templates. Instead of waiting for a full deployment, you can run pre-deployment checks, validate parameters, and ensure everything is working before pushing changes.

## Setting Up Symphony for Bicep Testing

### 1. Install Symphony and Dependencies

To get started, clone the Symphony repository and install the required dependencies.

You can find the full list of instructions here: [https://github.com/microsoft/symphony/blob/main/docs/GETTING\_STARTED.md](https://github.com/microsoft/symphony/blob/main/docs/GETTING_STARTED.md)

On windows this is easiest to setup using WSL.

```azcli
# Clone this repo.
$> git clone https://github.com/microsoft/symphony.git && cd symphony

# Login to AZ CLi
az login

# Ensure the target subscription is set
az account set --subscription <TargetSubscriptionId>

# Configure the symphony cli
source setup.sh

# Deploy dependent resources.
symphony provision

# Deploy and Configure an orchestrator.
symphony pipeline config <azdo|github> <terraform|bicep>
```

This asks a number of questions such as:

* GitHub Org Name?
* New repo name?
* Is the repo private?
* Create private runners (yes/no)
* Existing Resource group to deploy the runners to
* Resource Id for an existing subnet
* GitHub PAT to configure the Github secrets
* Do you want to install sample workflows?

I recommend installing the private runners as I had a little bit of difficulty getting it to work out of the box on a GitHub runner.  It's also probably a good idea as at least it's a private space if you have mistakenly released any secrets.

### 2. Try out the sample workflows

The repo that is created contains a number of sample workflows already.

These provide a good starting point to create your own.

## Conclusion

Testing Bicep with Microsoft Symphony ensures that issues are caught early in the development cycle. By automating validation and previewing deployments, teams can avoid unnecessary rollbacks and speed up their infrastructure deployment process.

To learn more, check out the [official Microsoft Symphony repository](https://github.com/microsoft/symphony) and start automating your IAC testing today.`
`
