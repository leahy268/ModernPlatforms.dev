---
title: Entra API-Driven Inbound Provisioning
heroImg: /uploads/API-Driven-Provisioning.png
excerpt: >
  Simplify user provisioning with Entra API-driven inbound provisioning—quick
  setup, straightforward licensing, and easy integration.
author: content/authors/warwick.md
date: 2025-07-06T14:00:00.000Z
---

Entra API-driven inbound provisioning streamlines the process of managing user accounts by providing a robust yet straightforward integration between your existing identity systems and Microsoft Entra ID. This guide highlights the simplicity and efficiency of implementing this feature.

As a former System Administrator, I've experienced firsthand how critical timely user provisioning is—and how frustrating it can be when HR forgets to notify IT about new hires until their start date or fails to communicate terminations promptly. API-driven provisioning addresses these issues by automating the entire process, ensuring accounts are created, updated, and disabled immediately and consistently.

## Requirements

To use API-driven inbound provisioning, you'll need:

* **Microsoft Entra ID Premium P1 license** (most enterprises already have this)
* **Entra Cloud Connect** installed and configured
* Access to the **Azure Portal** for configuration

## How Simple Is It?

Unlike traditional user synchronization solutions, Entra API-driven inbound provisioning requires minimal setup and infrastructure. Leveraging a modern RESTful API, it provides real-time provisioning, updates, and deactivation directly from your existing systems.

Key benefits include:

* **Minimal infrastructure overhead**: No heavy server-side software required
* **Immediate results**: Real-time updates to user accounts
* **Flexible integration**: Supports integration with diverse data sources, including flat files, SQL databases, and APIs

## Licensing

API-driven inbound provisioning is included with your existing Microsoft Entra ID Premium P1 subscription, commonly held by many organizations. If you're unsure about your licensing status, follow these steps:

1. Navigate to **Azure Portal > Entra ID > Licenses**.
2. Confirm your subscription shows **Premium P1** or higher.

*(Screenshot placeholder)*

## Setting up Entra API Provisioning

Follow these steps to configure your Entra API-driven inbound provisioning:

### Step 1: Configure the Entra Inbound Provisioning API Application

* Log in to the Azure Portal.
* Navigate to **Azure Portal > Entra ID > Enterprise Applications**.
* Select **New Application** and search for "Inbound Provisioning API".
* Configure the application according to your target (Entra ID or Active Directory).

*(Screenshot placeholder)*

### Step 2: Connect Your Source System

Depending on your source data (such as an export to a CSV file or direct SQL database connection), set up the necessary Azure resources:

* Key Vault (to securely store connection details or credentials)
* Automation Account
* Storage Account (for flat file exports)
* Logic App

*(Screenshot placeholder)*

### Step 3: Customize the PowerShell Runbook and Attribute Mappings

* Create a PowerShell script (Runbook) to transform your source data into SCIM payloads.
* Define custom attributes and configure the mappings within the provisioning settings.

*(Screenshot placeholder)*

### Step 4: Enable Provisioning and Monitor Logs

* Activate the provisioning service and Logic App.
* Monitor provisioning activity through logs and diagnostics in the Microsoft Entra admin portal.

*(Screenshot placeholder)*

## Attribute Mapping

Attribute mapping is straightforward and allows you to define clearly how your source attributes map to Entra ID user properties. Typical mappings might include:

| Source Attribute  | Entra Attribute     |
| ----------------- | ------------------- |
| `username`        | `userPrincipalName` |
| `email`           | `mail`              |
| `first_name`      | `givenName`         |
| `last_name`       | `surname`           |
| `employee_number` | `employeeId`        |
| `department`      | `department`        |

You can manage these mappings easily via the Azure Portal:

* Open **Azure Portal > Entra ID > Provisioning**
* Select **Attribute Mappings** to configure custom mappings

*(Screenshot placeholder)*

## Integrating with Logic Apps

Microsoft Logic Apps simplifies the integration process significantly, allowing quick and easy setups for provisioning workflows.

### Flat File Integration

1. **Create a new Logic App** in the Azure Portal.
2. Set the trigger, e.g., **"When a file is created or modified"** in Azure Blob Storage or SharePoint.
3. Parse your flat file (CSV/JSON) with the **Parse JSON** or **Compose** actions.
4. Use the HTTP action to provision users in Entra ID via the Graph API.

### SQL Database Integration

1. **Create a new Logic App**.
2. Use the **"When an item is created or modified (V2)"** SQL Server trigger.
3. Use an HTTP action to send provisioning data to the Entra API endpoint.
4. Configure the fields mapping according to your database schema.

Here's an example HTTP action configuration:

```json
{
  "method": "POST",
  "uri": "https://graph.microsoft.com/v1.0/servicePrincipals/{servicePrincipalId}/synchronization/jobs/{jobId}/bulkUpload",
  "headers": {
    "Authorization": "Bearer {your-token}",
    "Content-Type": "application/json"
  },
  "body": {
    "schemas": [
      "urn:ietf:params:scim:api:messages:2.0:BulkRequest"
    ],
    "Operations": [
      {
        "method": "POST",
        "bulkId": "unique-bulk-id",
        "path": "/Users",
        "data": {
          "schemas": [
            "urn:ietf:params:scim:schemas:core:2.0:User",
            "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"
          ],
          "externalId": "user-external-id",
          "userName": "username",
          "displayName": "User Display Name",
          "name": {
            "givenName": "FirstName",
            "familyName": "LastName"
          },
          "active": true,
          "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User": {
            "department": "User Department",
            "division": "User Division",
            "employeeNumber": "EmployeeNumber",
            "manager": {
              "value": "ManagerExternalId"
            }
          }
        }
      }
    ],
    "failOnErrors": true
  }
}
```

*(Screenshot placeholder)*

## Conclusion

Entra API-driven inbound provisioning provides an efficient, low-maintenance solution to user management, leveraging familiar tools and your existing licenses. With straightforward attribute mapping, easy-to-use Logic Apps, and minimal setup requirements, your provisioning tasks can become simpler than ever.xxx
